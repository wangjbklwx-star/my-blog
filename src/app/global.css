@import "tailwindcss";
@import "fumadocs-ui/css/catppuccin.css";
@import "fumadocs-ui/css/preset.css";
@import 'fumadocs-twoslash/twoslash.css';

/* ============================================
   Tailwind v4 深色模式配置
   ============================================ */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --color-fd-background: #f8fafc;
  --color-fd-foreground: #0f172a;
  --color-fd-border: #e2e8f0;
  --color-fd-ring: #2563eb;
  --color-fd-primary: #2563eb;
  --color-fd-primary-foreground: #ffffff;
  --color-fd-secondary: #f1f5f9;
  --color-fd-secondary-foreground: #0f172a;
  --color-fd-accent: #e2e8f0;
  --color-fd-accent-foreground: #0f172a;
  --color-fd-muted: #f1f5f9;
  --color-fd-muted-foreground: #64748b;
  --color-fd-card: #ffffff;
  --color-fd-card-foreground: #0f172a;
  --color-fd-popover: #ffffff;
  --color-fd-popover-foreground: #0f172a;
}

.dark {
  --color-fd-background: #0f172a;
  --color-fd-foreground: #f8fafc;
  --color-fd-border: #1e293b;
  --color-fd-ring: #3b82f6;
  --color-fd-primary: #3b82f6;
  --color-fd-primary-foreground: #ffffff;
  --color-fd-secondary: #1e293b;
  --color-fd-secondary-foreground: #f8fafc;
  --color-fd-accent: #1e293b;
  --color-fd-accent-foreground: #f8fafc;
  --color-fd-muted: #1e293b;
  --color-fd-muted-foreground: #94a3b8;
  --color-fd-card: #0f172a;
  --color-fd-card-foreground: #f8fafc;
  --color-fd-popover: #0f172a;
  --color-fd-popover-foreground: #f8fafc;
}

.prose {
  --tw-prose-links: var(--color-fd-primary);
}

@layer base {
  a {
    @apply [overflow-wrap:anywhere];
    transition: color 0.2s ease;
  }
  
  a:hover {
    color: #2563eb;
  }
  
  .dark a:hover {
    color: #3b82f6;
  }
  
  code {
    font-family: var(--font-jetbrains-mono);
  }
  
  html {
    scroll-behaviour: smooth;
  }
  
  [id^="fnref"],
  [id^="user-content-fnref"] {
    scroll-margin-top: 5.5rem;
    display: inline-block;
  }

  [id^="fn-"],
  [id^="user-content-fn-"] {
    scroll-margin-top: 5.5rem;
  }
}

/* ============================================
   Waline 评论区 - 蓝色主题适配
   使用 html 选择器提高优先级，确保覆盖默认样式
   ============================================ */

/* 基础变量覆盖 - 蓝色主题（浅色模式） */
html {
  /* 主题色改为蓝色 */
  --waline-theme-color: #2563eb;
  --waline-active-color: #3b82f6;
  
  /* 布局颜色 - 适配你的浅色主题 */
  --waline-color: #0f172a;
  --waline-bg-color: #ffffff;
  --waline-bg-color-light: #f8fafc;
  --waline-bg-color-hover: #f1f5f9;
  --waline-border-color: #e2e8f0;
  --waline-disable-bg-color: #f1f5f9;
  --waline-disable-color: #94a3b8;
  --waline-code-bg-color: #0f172a;
  
  /* 特殊颜色 */
  --waline-bq-color: #f1f5f9;
  
  /* 徽章颜色改为蓝色 */
  --waline-badge-color: #2563eb;
  
  /* 信息区域 */
  --waline-info-bg-color: #f8fafc;
  --waline-info-color: #64748b;
  
  /* 其他 */
  --waline-white: #fff;
  --waline-light-grey: #999;
  --waline-dark-grey: #666;
}

/* 深色模式 - 使用 html.dark 提高优先级 */
html.dark {
  /* 主题色 - 稍亮的蓝色 */
  --waline-theme-color: #3b82f6;
  --waline-active-color: #60a5fa;
  
  /* 布局颜色 - 适配你的深色主题 */
  --waline-white: #0f172a;
  --waline-light-grey: #94a3b8;
  --waline-dark-grey: #cbd5e1;
  --waline-color: #f8fafc;
  --waline-bg-color: #0f172a;
  --waline-bg-color-light: #1e293b;
  --waline-bg-color-hover: #334155;
  --waline-border-color: #1e293b;
  --waline-disable-bg-color: #1e293b;
  --waline-disable-color: #475569;
  --waline-code-bg-color: #1e293b;
  
  /* 特殊颜色 */
  --waline-bq-color: #1e293b;
  
  /* 徽章颜色 */
  --waline-badge-color: #3b82f6;
  
  /* 信息区域 */
  --waline-info-bg-color: #1e293b;
  --waline-info-color: #64748b;
}

/* ============================================
   Waline 组件样式覆盖
   使用具体类名确保生效
   ============================================ */

/* 输入框聚焦状态 */
.wl-input:focus,
.wl-editor:focus {
  border-color: var(--waline-theme-color) !important;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important;
}

html.dark .wl-input:focus,
html.dark .wl-editor:focus {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
}

/* 按钮样式增强 */
.wl-btn {
  border-radius: 0.5rem !important;
  font-weight: 500 !important;
  transition: all 0.2s ease !important;
}

.wl-btn.primary {
  background: var(--waline-theme-color) !important;
  color: white !important;
}

.wl-btn.primary:hover {
  background: var(--waline-active-color) !important;
  transform: translateY(-1px) !important;
}

/* 评论卡片 */
.wl-card {
  border-radius: 0.75rem !important;
  border: 1px solid var(--waline-border-color) !important;
  background: var(--waline-bg-color) !important;
}

/* 头像 */
.wl-avatar img {
  border-radius: 50% !important;
  border: 2px solid var(--waline-border-color) !important;
  transition: border-color 0.2s ease !important;
}

.wl-avatar img:hover {
  border-color: var(--waline-theme-color) !important;
}

/* 点赞按钮 */
.wl-like-btn.active {
  color: var(--waline-theme-color) !important;
}

/* 回复按钮 */
.wl-reply-btn {
  color: var(--waline-theme-color) !important;
}

/* 代码块 */
.wl-content pre {
  background: var(--waline-code-bg-color) !important;
  border-radius: 0.5rem !important;
}

/* 引用块 */
.wl-content blockquote {
  border-left: 4px solid var(--waline-theme-color) !important;
  background: var(--waline-bq-color) !important;
  border-radius: 0 0.5rem 0.5rem 0 !important;
}

/* 链接 */
.wl-content a {
  color: var(--waline-theme-color) !important;
  text-decoration: none !important;
}

.wl-content a:hover {
  text-decoration: underline !important;
}

/* 表情选择器 */
.wl-emoji-popup {
  border-radius: 0.75rem !important;
  border: 1px solid var(--waline-border-color) !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
  background: var(--waline-bg-color) !important;
}

html.dark .wl-emoji-popup {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5) !important;
}

/* 预览区域 */
.wl-preview {
  border-radius: 0.5rem !important;
  background: var(--waline-bg-color-light) !important;
}

/* 通知徽章 */
.wl-badge {
  background: var(--waline-badge-color) !important;
  color: white !important;
  font-weight: 600 !important;
}

/* 加载动画颜色 */
.wl-loading svg {
  color: var(--waline-theme-color) !important;
}

/* 空状态 */
.wl-empty {
  color: var(--waline-info-color) !important;
}

/* 版权信息隐藏 */
.wl-copyright,
.wl-power,
.wl-footer .wl-copyright,
.wl-footer .wl-power {
  display: none !important;
}

.wl-footer {
  display: flex !important;
}

/* 输入框背景 */
.wl-input,
.wl-editor {
  background: var(--waline-bg-color) !important;
  color: var(--waline-color) !important;
  border-color: var(--waline-border-color) !important;
}

/* 评论内容文字颜色 */
.wl-content {
  color: var(--waline-color) !important;
}

/* 用户名颜色 */
.wl-nick {
  color: var(--waline-color) !important;
}

/* 时间颜色 */
.wl-time {
  color: var(--waline-info-color) !important;
}

/* 操作按钮颜色 */
.wl-delete,
.wl-like,
.wl-reply {
  color: var(--waline-info-color) !important;
}

.wl-delete:hover,
.wl-like:hover,
.wl-reply:hover {
  color: var(--waline-theme-color) !important;
}
